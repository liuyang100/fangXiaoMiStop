{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/仿小米商城/main.js","webpack:///C:/Users/Administrator/Desktop/仿小米商城/pages/cart/cart.vue?d7da","webpack:///C:/Users/Administrator/Desktop/仿小米商城/pages/cart/cart.vue?cbb1","webpack:///C:/Users/Administrator/Desktop/仿小米商城/pages/cart/cart.vue?990f","webpack:///C:/Users/Administrator/Desktop/仿小米商城/pages/cart/cart.vue?ad0c","webpack:///C:/Users/Administrator/Desktop/仿小米商城/pages/cart/cart.vue"],"names":["createPage","Page","mixins","loading","components","uniNavBar","price","uniNumberBox","commonList","skuPopup","data","isedit","hotList","computed","list","state","cart","onLoad","getData","uni","$on","beforeDestroy","$off","onPullDownRefresh","methods","changeNum","e","item","index","num","showLoading","title","$H","post","id","token","then","res","console","log","hideLoading","orderConfirm","navigateTo","url","showPopup","get","check","skusText","split","selects","goods_skus_card","map","v","i","selected","goods_skus_card_value","v1","i1","value","name","goods_skus","forEach","arr","key","skus","push","join","doShowPopup","toast","unSelectAll","initCartList","stopPullDownRefresh","catch","err","cover","desc","oprice","min_oprice","pprice","min_price"],"mappings":"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","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./cart.vue?vue&type=template&id=0cc4099a&\"\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('0cc4099a', component.options)\n    } else {\n      api.reload('0cc4099a', component.options)\n    }\n    module.hot.accept(\"./cart.vue?vue&type=template&id=0cc4099a&\", function () {\n      api.rerender('0cc4099a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/Administrator/Desktop/仿小米商城/pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=template&id=0cc4099a&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.isedit = !_vm.isedit\n    }\n  }\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!D:\\\\HBuilderX.2.3.7.20191024.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport loading from \"@/common/mixin/loading.js\"\n\nimport uniNavBar from \"@/components/uni-ui/uni-nav-bar/uni-nav-bar.vue\"\nimport price from \"@/components/common/price.vue\"\nimport uniNumberBox from \"@/components/uni-ui/uni-number-box/uni-number-box.vue\"\n\nimport {mapState,mapGetters,mapActions,mapMutations} from \"vuex\"\n\nimport commonList from \"@/components/common/common-list.vue\"\nimport skuPopup from '@/components/cart/sku-popup.vue';\n\nexport default {\n\tmixins:[loading],\n\tcomponents: {\n\t\tuniNavBar,\n\t\tprice,\n\t\tuniNumberBox,\n\t\tcommonList,\n\t\tskuPopup\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisedit: false,\n\t\t\thotList:[]\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState({\n\t\t\tlist:state=>state.cart.list\n\t\t}),\n\t\t...mapGetters([\n\t\t\t'checkedAll',\n\t\t\t'totalPrice',\n\t\t\t'disableSelectAll'\n\t\t])\n\t},\n\tonLoad() {\n\t\tthis.getData()\n\t\t// 监听购物车更新\n\t\tuni.$on('updateCart',()=>{\n\t\t\tthis.getData()\n\t\t})\n\t},\n\tbeforeDestroy() {\n\t\tuni.$off('updateCart')\n\t},\n\tonPullDownRefresh() {\n\t\tthis.getData()\n\t},\n\tmethods:{\n\t\t...mapActions([\n\t\t\t'doSelectAll',\n\t\t\t'doDelGoods',\n\t\t\t'doShowPopup',\n\t\t]),\n\t\t...mapMutations([\n\t\t\t'selectItem',\n\t\t\t'initCartList',\n\t\t\t'unSelectAll'\n\t\t]),\n\t\tchangeNum(e,item,index){\n\t\t\tif (item.num === e) return;\n\t\t\tuni.showLoading({\n\t\t\t\ttitle:\"加载中...\"\n\t\t\t})\n\t\t\tthis.$H.post('/cart/updatenumber/'+item.id,{\n\t\t\t\tnum:e\n\t\t\t},{\n\t\t\t\ttoken:true\n\t\t\t}).then(res=>{\n\t\t\t\tconsole.log(res);\n\t\t\t\titem.num = e\n\t\t\t\tuni.hideLoading()\n\t\t\t})\n\t\t},\n\t\t// 订单结算\n\t\torderConfirm(){\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '../order-confirm/order-confirm'\n\t\t\t});\n\t\t},\n\t\tshowPopup(index,item){\n\t\t\tif(!this.isedit){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$H.get('/cart/'+item.id+'/sku',{},{\n\t\t\t\ttoken:true\n\t\t\t}).then(res=>{\n\t\t\t\t\n\t\t\t\t// 商品规格（选项部分）\n\t\t\t\tlet check = item.skusText.split(',')\n\t\t\t\tres.selects = res.goods_skus_card.map((v,i)=>{\n\t\t\t\t  let selected = 0\n\t\t\t\t  let list = v.goods_skus_card_value.map((v1,i1)=>{\n\t\t\t\t\t  if(check[i] === v1.value){\n\t\t\t\t\t\t  selected = i1\n\t\t\t\t\t  }\n\t\t\t\t\t  return {\n\t\t\t\t\t\t  id:v1.id,\n\t\t\t\t\t\t  name:v1.value\n\t\t\t\t\t  }\n\t\t\t\t  })\n\t\t\t\t  return {\n\t\t\t\t\tid:v.id,\n\t\t\t\t\ttitle:v.name,\n\t\t\t\t\tselected,\n\t\t\t\t\tlist:list\n\t\t\t\t  }\n\t\t\t\t})\n\t\t\t\t// 商品规格（匹配价格）\n\t\t\t\tres.goods_skus.forEach(item=>{\n\t\t\t\t  let arr = []\n\t\t\t\t  for (let key in item.skus) {\n\t\t\t\t\tarr.push(item.skus[key].value)\n\t\t\t\t  }\n\t\t\t\t  item.skusText = arr.join(',')\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.doShowPopup({\n\t\t\t\t\tindex:index,\n\t\t\t\t\tdata:res\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t// 获取数据\n\t\tgetData(){\n\t\t\t// 获取购物车数据\n\t\t\tthis.$H.get('/cart',{},{\n\t\t\t\ttoken:true,\n\t\t\t\ttoast:false\n\t\t\t}).then(res=>{\n\t\t\t\t// 取消选中状态\n\t\t\t\tthis.unSelectAll()\n\t\t\t\t// 赋值\n\t\t\t\tthis.initCartList(res)\n\t\t\t\tuni.stopPullDownRefresh()\n\t\t\t}).catch(err=>{\n\t\t\t\tuni.stopPullDownRefresh()\n\t\t\t})\n\t\t\t// 获取热门推荐\n\t\t\tthis.$H.get('/goods/hotlist').then(res=>{\n\t\t\t\tthis.hotList = res.map(v=>{\n\t\t\t\t\treturn {\n\t\t\t\t\t  id:v.id,\n\t\t\t\t\t  cover:v.cover,\n\t\t\t\t\t  title:v.title,\n\t\t\t\t\t  desc:v.desc,\n\t\t\t\t\t  oprice:v.min_oprice,\n\t\t\t\t\t  pprice:v.min_price\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n}\n"],"sourceRoot":""}